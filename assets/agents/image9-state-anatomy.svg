<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 500">
  <style>text{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}</style>
  <defs>
    <marker id="a" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0 0L10 5L0 10z" fill="#111"/>
    </marker>
    <marker id="am" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0 0L10 5L0 10z" fill="#999"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="350" y="28" text-anchor="middle" font-size="11" font-weight="600" fill="#999">STATE ANATOMY</text>

  <!-- Outer State boundary -->
  <rect x="30" y="45" width="640" height="380" rx="10" fill="#f7f7f7" stroke="#111" stroke-width="2"/>
  <text x="70" y="72" font-size="16" font-weight="700" fill="#111">State</text>
  <text x="70" y="88" font-size="10" fill="#666">The agent's structured internal representation of the world</text>

  <!-- Row 1: Core data structures -->
  <!-- Application Schema -->
  <rect x="55" y="110" width="155" height="90" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="132" y="135" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Application Schema</text>
  <line x1="70" y1="145" x2="195" y2="145" stroke="#e5e5e5" stroke-width="1"/>
  <text x="132" y="163" text-anchor="middle" font-size="9" fill="#666">Class instances</text>
  <text x="132" y="177" text-anchor="middle" font-size="9" fill="#666">Type-safe structures</text>
  <text x="132" y="191" text-anchor="middle" font-size="9" fill="#666">Domain models</text>

  <!-- Knowledge Graph -->
  <rect x="230" y="110" width="155" height="90" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="307" y="135" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Knowledge Graph</text>
  <line x1="245" y1="145" x2="370" y2="145" stroke="#e5e5e5" stroke-width="1"/>
  <text x="307" y="163" text-anchor="middle" font-size="9" fill="#666">Entities &amp; relations</text>
  <text x="307" y="177" text-anchor="middle" font-size="9" fill="#666">Traversable structure</text>
  <text x="307" y="191" text-anchor="middle" font-size="9" fill="#666">Semantic connections</text>

  <!-- Databases / Tables -->
  <rect x="405" y="110" width="155" height="90" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="482" y="135" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Databases</text>
  <line x1="420" y1="145" x2="545" y2="145" stroke="#e5e5e5" stroke-width="1"/>
  <text x="482" y="163" text-anchor="middle" font-size="9" fill="#666">Tables &amp; rows</text>
  <text x="482" y="177" text-anchor="middle" font-size="9" fill="#666">Queryable storage</text>
  <text x="482" y="191" text-anchor="middle" font-size="9" fill="#666">Transactional integrity</text>

  <!-- Row 2: Supporting structures -->
  <!-- Configuration -->
  <rect x="55" y="230" width="120" height="75" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="115" y="255" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Configuration</text>
  <line x1="70" y1="265" x2="160" y2="265" stroke="#e5e5e5" stroke-width="1"/>
  <text x="115" y="283" text-anchor="middle" font-size="9" fill="#666">Settings, flags</text>
  <text x="115" y="297" text-anchor="middle" font-size="9" fill="#666">Runtime params</text>

  <!-- Indexes -->
  <rect x="195" y="230" width="120" height="75" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="255" y="255" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Indexes</text>
  <line x1="210" y1="265" x2="300" y2="265" stroke="#e5e5e5" stroke-width="1"/>
  <text x="255" y="283" text-anchor="middle" font-size="9" fill="#666">Search indices</text>
  <text x="255" y="297" text-anchor="middle" font-size="9" fill="#666">Embeddings</text>

  <!-- File System -->
  <rect x="335" y="230" width="120" height="75" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="395" y="255" text-anchor="middle" font-size="12" font-weight="700" fill="#111">File System</text>
  <line x1="350" y1="265" x2="440" y2="265" stroke="#e5e5e5" stroke-width="1"/>
  <text x="395" y="283" text-anchor="middle" font-size="9" fill="#666">Code, docs</text>
  <text x="395" y="297" text-anchor="middle" font-size="9" fill="#666">Artifacts, logs</text>

  <!-- Memories -->
  <rect x="475" y="230" width="120" height="75" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="535" y="255" text-anchor="middle" font-size="12" font-weight="700" fill="#111">Memories</text>
  <line x1="490" y1="265" x2="580" y2="265" stroke="#e5e5e5" stroke-width="1"/>
  <text x="535" y="283" text-anchor="middle" font-size="9" fill="#666">Long-term store</text>
  <text x="535" y="297" text-anchor="middle" font-size="9" fill="#666">Cross-session</text>

  <!-- Connections between state components -->
  <line x1="210" y1="155" x2="230" y2="155" stroke="#111" stroke-width="1"/>
  <line x1="385" y1="155" x2="405" y2="155" stroke="#111" stroke-width="1"/>
  <line x1="132" y1="200" x2="132" y2="230" stroke="#111" stroke-width="1"/>
  <line x1="307" y1="200" x2="255" y2="230" stroke="#111" stroke-width="1"/>
  <line x1="307" y1="200" x2="395" y2="230" stroke="#111" stroke-width="1"/>
  <line x1="482" y1="200" x2="535" y2="230" stroke="#111" stroke-width="1"/>

  <!-- Key properties (bottom band) -->
  <rect x="55" y="340" width="540" height="68" rx="6" fill="#fff" stroke="#111" stroke-width="1.5" stroke-dasharray="6 3"/>
  <text x="325" y="363" text-anchor="middle" font-size="11" font-weight="700" fill="#111">Key Properties</text>
  <text x="140" y="385" text-anchor="middle" font-size="9" fill="#666">Persistent across invocations</text>
  <text x="325" y="385" text-anchor="middle" font-size="9" fill="#666">Structured &amp; typed</text>
  <text x="490" y="385" text-anchor="middle" font-size="9" fill="#666">Modified only through tools</text>
  <text x="140" y="399" text-anchor="middle" font-size="9" fill="#666">Validatable</text>
  <text x="325" y="399" text-anchor="middle" font-size="9" fill="#666">NOT a string</text>
  <text x="490" y="399" text-anchor="middle" font-size="9" fill="#666">NOT the context window</text>

  <!-- Tools interface (outside State, bottom) -->
  <rect x="230" y="450" width="240" height="36" rx="5" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="350" y="473" text-anchor="middle" font-size="11" font-weight="600" fill="#111">Tools (read / write interface)</text>

  <!-- Arrows from Tools into State -->
  <line x1="310" y1="450" x2="250" y2="425" stroke="#111" stroke-width="1.5" marker-end="url(#a)"/>
  <line x1="390" y1="450" x2="450" y2="425" stroke="#111" stroke-width="1.5" marker-end="url(#a)"/>
</svg>
